{% extends "index.html" %}
{% block title %}Project{% endblock %}
{% block head %}
    {{ super() }}
{% endblock %}
{% block header %}
    {{ super() }}
{% endblock %}
{% block black %}
    {{ super() }}
{% endblock %}

{% block page %}
    <table class="layui-table" lay-data="{width: 1100, height:332, url:'/admin/project/all', page:true, id:'idTest'}" lay-filter="demo">
  <thead>
    <tr>
      <th lay-data="{field:'id', width:50, sort: true,}">ID</th>
      <th lay-data="{field:'name', width:200}">proname</th>
      <th lay-data="{field:'repo_url', width:500, sort: true}">url</th>
      <th lay-data="{field:'dict_id', width:80}">dictid</th>
      <th lay-data="{ width:300, align:'center', toolbar: '#barDemo'}">action</th>
    </tr>
  </thead>
</table>

<script type="text/html" id="barDemo">
  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>


<script src="../static/layui/layui.all.js" charset="utf-8"></script>
<script src="../static/layui/lay/modules/table.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
layui.use('table', function(){
  var table = layui.table;
  //监听工具条
  table.on('tool(demo)', function(obj){
      console.log(obj)
    var data = obj.data;
    if(obj.event === 'detail'){
      layer.msg('ID：'+ data.id + ' 的查看操作');
    } else if(obj.event === 'del'){
      layer.confirm('真的删除行么', function(index){
        obj.del();
        layer.close(index);
      });
    } else if(obj.event === 'edit'){
      layer.alert('编辑行：<br>'+ JSON.stringify(data))
    }
  });
});
</script>
{% endblock %}

{% block body %}
    {{ super() }}
{% endblock %}